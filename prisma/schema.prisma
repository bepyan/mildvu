generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["referentialIntegrity"]
}

datasource db {
  provider             = "mysql"
  url                  = env("DATABASE_URL")
  referentialIntegrity = "prisma"
}

model User {
  id         Int        @id @default(autoincrement())
  publishKey String     @unique
  name       String
  password   String
  email      String?
  avatar     String?
  createdAt  DateTime   @default(now())
  updatedAt  DateTime   @updatedAt
  Magazine   Magazine[]
}

model Magazine {
  id        Int       @id @default(autoincrement())
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  user      User      @relation(fields: [userId], references: [id], onDelete: Cascade)
  userId    Int
  content   Content[]

  @@index([userId])
}

model Content {
  id         Int      @id @default(autoincrement())
  index      Int
  imageURL   String
  Magazine   Magazine @relation(fields: [magazineId], references: [id], onDelete: Cascade)
  magazineId Int
  Button     Button[]

  @@index([magazineId])
}

model Button {
  id        Int     @id @default(autoincrement())
  startX    Float
  startY    Float
  endX      Float
  endY      Float
  linkURL   String
  Content   Content @relation(fields: [contentId], references: [id], onDelete: Cascade)
  contentId Int

  @@index([contentId])
}
